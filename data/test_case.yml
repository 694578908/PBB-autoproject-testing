PBB_login:
- name: 输入手机号
  requests:
    method: get
    headers:
      Content-Type: application/json
      authorization: Basic bWFsbC1hcHA6MTIzNDU2
      site: app
    url: ${app_url}/applet/user/getCode?phone=15881086120
    data:
  storage:
    mobile: '15881086120'
  validate:
    code: 200

- name: 输入验证码
  requests:
    method: post
    headers:
      Content-Type: application/json
      site: app
      authorization: Basic bWFsbC1hcHA6MTIzNDU2
    url: ${app_url}/auth/oauth/token
    data:
      smsModel:
        brand: 'iPhone'
        deviceId: 59AAC7B0-F77C-407F-988B-345CCA200D30
        model: iPhone
        platform: iOS
        systemName: iOS 17.5.1
        value: ${code}
        mobile: ${mobile}
        parentUserId: ""
      grantType: "APP_SMS_CODE"
  extract:
    Authorization: "token\":\"(.*?)\""
  validate:
    code: 200

C_module:
- name: 首页-兼职列表
  requests:
    method: post
    headers:
      Content-Type: application/json
      site: app
      Authorization: ${Authorization}
    url: ${app_url}/applet/position/list/v3
    data:
      jobType: 1
      pageNum: 1
      pageSize: 12
      isNew: null
      isNear: null
  validate:
    code: 200

B_module:
- name: 首页-推荐列表（全部）
  requests:
    method: post
    headers:
      Content-Type: application/json
      site: app
      Authorization: ${Authorization}
    url: ${app_url}/applet/enterprise/user/talentSquare/userList/v3
    data:
      childrenId: 1401
      cityId: null
      key: recommendAll
      pageNum: 1
      pageSize: 10
      parentId: 14
      jobStatus: null
      sex: null
      workYear: null
      educationType: null
      liveTypeIdList: null
      trackIdList: null
  validate:
    code: 200

PBB_backstage_login:
#- name: 登录后台管理账号（当前接口Authorization为固定值）
#  requests:
#    method: post
#    headers:
#      Content-Type: application/json
#      Authorization: Basic bWFsbC1hZG1pbjoxMjM0NTY=
#    url: ${module_url}/auth/oauth/token
#    data:
#      grantType: "PASSWORD"
#      passwordModel:
#        password: "pbbadmin123456"
#        username: "admin"
#  extract:
#    HT_Authorization: "accessToken\":\"(.*?)\""
#  validate:
#    code: 200

- name: 获取图片Base64
  requests:
    method: get
    headers:
      Content-Type: application/json
      Authorization: Basic bWFsbC1hZG1pbjoxMjM0NTY=
    url: ${ht_url}/pbbmanage/code
    data:
  extract:
    Base64: "img\":\"(.*?)\""
    uuid: "uuid\":\"(.*?)\""
  paddleocr: paddleocr
  validate:
    code: 200

- name: 登录后台管理账号
  requests:
    method: post
    headers:
      Content-Type: application/json
      Authorization: Basic bWFsbC1hZG1pbjoxMjM0NTY=
    url: ${ht_url}/pbbmanage/auth/oauth/token
    data:
      clientId: "mall-admin"
      grantType: "CAPTCHA"
      clientSecret: 123456
      captchaModel:
        password: pbbadmin123456
        username: "admin"
        verifyCodeKey: ${uuid}
        verifyCodeValue: ${ht_code}
  extract:
    HT_Authorization: "accessToken\":\"(.*?)\""
  validate:
    code: 200

